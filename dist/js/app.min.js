/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_burger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/burger.js */ \"./src/js/modules/burger.js\");\n/* harmony import */ var _modules_products_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/products.js */ \"./src/js/modules/products.js\");\n// Проверяем поддерживает ли браузер картинки WEBp\r\n\r\n// import * as flsFunctions from \"./modules/functions.js\";\r\n\r\n// flsFunctions.isWebp();\r\n\r\ntestWebP(document.documentElement);\r\n\r\nfunction testWebP(elem) {\r\n  const webP = new Image();\r\n  webP.src =\r\n    \"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA\";\r\n  webP.onload = webP.onerror = function () {\r\n    webP.height === 2\r\n      ? elem.classList.add(\"webp\")\r\n      : elem.classList.add(\"no-webp\");\r\n  };\r\n}\r\n\r\n// Подключаем другие файлы которые нам нужны\r\n// Чтобы использовать модули, в папке modules создаем js файл, который нам нужен, а потом подключаем его в этот файл как указано ниже - import \"./modules/burger.js\";\r\n// burger menu\r\n\r\n// import \"./modules/registrationLogic.js\";\r\n\r\n\n\n//# sourceURL=webpack://gulp-2022/./src/js/app.js?");

/***/ }),

/***/ "./src/js/modules/burger.js":
/*!**********************************!*\
  !*** ./src/js/modules/burger.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// burger\r\n/** Нам нужно чтобы при нажатии на header__burger\r\n * добавлялся class \"active\" для header__burger и\r\n * header__menu  */\r\n\r\n//Jquery\r\n$(document).ready(function () {\r\n  $(\".icon-menu\").on(\"click\", function (event) {\r\n    $(\".menu__body, .icon-menu\").toggleClass(\"_active\");\r\n    $(\"body\").toggleClass(\"lock\"); // при открытом бургер меню не скроллится контент\r\n  });\r\n});\r\n\r\n\r\n//JS\r\n// let header__burger = document.querySelector('.header__burger');\r\n// let header_menu = document.querySelector('.header__menu');\r\n// let back = document.querySelector('body');\r\n// let header__list = document.querySelector('.header__list');\r\n\r\n// header__burger.addEventListener('click', addActive)\r\n// header__list.addEventListener('click', addActive)\r\n\r\n// function addActive(e) {\r\n// \t// e.target.classList.toggle('active')\r\n// \t// console.log(e.target);\r\n// \theader__burger.classList.toggle('active');\r\n// \t    header_menu.classList.toggle('active');\r\n// }\r\n\n\n//# sourceURL=webpack://gulp-2022/./src/js/modules/burger.js?");

/***/ }),

/***/ "./src/js/modules/products.js":
/*!************************************!*\
  !*** ./src/js/modules/products.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\nconst btn = document.querySelector(\".section-addProducts__btn\");\r\nconst closeBtn = document.querySelector(\".slide-menu__closeModal\");\r\nconst modal = document.querySelector(\".slide-menu\");\r\nconst menuSlider = document.querySelector(\".product-counter\");\r\nconst list = document.querySelector(\".slide-menu__list\"); //ul\r\nconst arrow = document.querySelector(\".product-counter__arrow-back\");\r\nconst range = document.querySelector(\".product-counter__input\");\r\nconst btnAddProduct = document.querySelector(\".product-counter__btn\");\r\nconst ulList = document.querySelector(\".added-product__list\");\r\nconst editModalWindow = document.querySelector(\".edit-product\");\r\nconst deleteProductBtn = document.querySelector(\".added-product__close\");\r\n\r\n// events\r\nbtn.addEventListener(\"click\", openModal);\r\ncloseBtn.addEventListener(\"click\", closeModal);\r\nlist.addEventListener(\"click\", openProduct);\r\narrow.addEventListener(\"click\", closeMenuSlider);\r\ndocument.addEventListener(\"input\", rangeAndCountCalories);\r\ndocument.addEventListener(\"input\", rangeAndCountCalories2);\r\ndocument.addEventListener(\"click\", addProductToCart);\r\nulList.addEventListener(\"click\", editProduct);\r\ndocument.addEventListener(\"click\", addEditedProduct);\r\ndocument.addEventListener(\"click\", deleteProduct);\r\n\r\n// перед началом работы рендерим на страинцу те продукты, которые лежат в БД\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  fetch(\"http://localhost:3000/my-products\")\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      data.forEach((product) => {\r\n        // разметка\r\n        const markUp = `<li class=\"added-product__item\" data-productName =${product.name} data-id = ${product.id} data-caloriesInBD=${product.caloriesInBD} >\r\n        <div class=\"added-product__content\"> \r\n    \r\n        <div class=\"added-product__left\">\r\n      <div class=\"added-product__img\">\r\n        <img src=\"./img/img products/${product.src}.png\" alt=\"\">\r\n      </div>\r\n      <div class=\"added-product__title\">${product.name}</div>\r\n    </div>\r\n    <div class=\"added-product__right\">\r\n      <div class=\"added-product__calories\">${product.calories} калорий </div>\r\n      <div class=\"added-product__quantity\">${product.quantity} грамм</div>\r\n     \r\n    </div>\r\n        </div>\r\n        <div class=\"added-product__close\"></div>\r\n  </li>`;\r\n\r\n        const ulList = document.querySelector(\".added-product__list\");\r\n        // рендерим на страницу\r\n        ulList.insertAdjacentHTML(\"beforeend\", markUp);\r\n        countCalories();\r\n      });\r\n    });\r\n});\r\n\r\n//logic\r\nfunction openModal() {\r\n  modal.classList.add(\"slide-menu_active\");\r\n  list.innerHTML = \"\";\r\n  //render\r\n  getData().then((products) => {\r\n    products.forEach((product) => {\r\n      // console.log(product);\r\n      const markup = `<li class=\"slide-menu__item product-card\" data-productName =${product.name} \">\r\n    <div class=\"product-card__body\" data-name=\"${product.src}\" data-calories=\"${product.calories}\" data-id=\"${product.id}\">\r\n      <div class=\"product-card__img\">\r\n        <img src=\"./img/img products/${product.src}.png\" alt=\"\" />\r\n      </div>\r\n      <h2 class=\"product-card__title\">${product.name}</h2>\r\n    </div>\r\n  </li>`;\r\n      list.insertAdjacentHTML(\"beforeend\", markup);\r\n    });\r\n\r\n    // console.log(products);\r\n  });\r\n}\r\n\r\nfunction closeModal() {\r\n  modal.classList.remove(\"slide-menu_active\");\r\n  menuSlider.classList.remove(\"product-counter_active\");\r\n}\r\n\r\nfunction closeMenuSlider() {\r\n  menuSlider.classList.remove(\"product-counter_active\");\r\n}\r\n\r\n// open product and show counter\r\nfunction openProduct(e) {\r\n  console.log(e.target); //product-card__body\r\n  const out = document.querySelector(\".product-counter__out\");\r\n  out.innerHTML = \"\";\r\n  menuSlider.classList.add(\"product-counter_active\");\r\n  console.log(e.target.dataset);\r\n  const infoAboutProduct = {\r\n    id: e.target.dataset.id,\r\n    name: e.target.querySelector(\".product-card__title\").innerHTML,\r\n    src: e.target.dataset.name,\r\n    calories: e.target.dataset.calories,\r\n  };\r\n\r\n  console.log(infoAboutProduct);\r\n\r\n  const markUp = `<div class=\"product-counter__card\" data-id =\"${infoAboutProduct.id}\">\r\n  <div class=\"product-counter__wrapper1\">\r\n    <div class=\"product-counter__img\">\r\n      <img\r\n        src=\"./img/img products/img big size products/${infoAboutProduct.src}-xl-size.png\"\r\n        alt=\"\"\r\n      />\r\n    </div>\r\n    <h2 class=\"product-counter__title\">\r\n      <span> Имя продукта: </span> ${infoAboutProduct.name}\r\n    </h2>\r\n  </div>\r\n  <div class=\"product-counter__wrapper2\">\r\n    <div class=\"product-counter__info-card\">\r\n\r\n      <div class=\"product-counter__portion\">Порция</div>\r\n      <div class=\"product-counter__range\">\r\n        <input\r\n          type=\"range\"\r\n          class=\"product-counter__input\"\r\n          min=\"0\"\r\n          max=\"300\"\r\n          value=\"0\"\r\n        />\r\n        <div class=\"product-counter__num\">\r\n          <span class=\"product-counter__quantity-gramm\">\r\n            0</span\r\n          >\r\n          <span class=\"product-counter__span\"> грамм</span>\r\n        </div>\r\n      </div>\r\n      <ul class=\"product-counter__portions\" data-calories=\"${infoAboutProduct.calories}\" data-product=\"${infoAboutProduct.src}\" data-id =\"${infoAboutProduct.id}\">\r\n      <li class=\"product-counter__one-portion\">\r\n      <div class=\"product-counter__gramm\">\r\n        В 100 граммах ${infoAboutProduct.name} <span> ${infoAboutProduct.calories} </span> каллорий\r\n      </div>\r\n    </li>\r\n    <li class=\"product-counter__one-portion\">\r\n      <div class=\"product-counter__gramm\">\r\n        Одна порция ${infoAboutProduct.name} - это 150 грамм\r\n      </div>\r\n    </li>\r\n    <li class=\"product-counter__one-portion\">\r\n      <div class=\"product-counter__gramm\" >\r\n        Вы съели <span data-summonFood=\"all-food\"> 0 </span>  каллорий\r\n      </div>\r\n    </li>\r\n      </ul>\r\n      <button class=\"product-counter__btn button-addProduct\">\r\n        Добавить продукт\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>`;\r\n\r\n  out.insertAdjacentHTML(\"beforeend\", markUp);\r\n}\r\n\r\n//range and count calories\r\nfunction rangeAndCountCalories(e) {\r\n  if (e.target.classList.contains(\"product-counter__input\")) {\r\n    const out = document.querySelector(\".product-counter__quantity-gramm\");\r\n    out.innerHTML = e.target.value;\r\n    const inputBox = e.target.closest(\".product-counter__range\");\r\n    const card = inputBox.closest(\".product-counter__info-card\");\r\n    const nameOfCurrentCard = card.querySelector(\"[data-product]\");\r\n    const caloriesOfProduct = nameOfCurrentCard.dataset.calories;\r\n    const haveEaten = document.querySelector('[data-summonFood=\"all-food\"]');\r\n    const amountOfCalories =\r\n      (parseInt(e.target.value) * parseInt(caloriesOfProduct)) / 100;\r\n    haveEaten.innerText = amountOfCalories;\r\n  }\r\n}\r\n\r\n// add product to your daily ration\r\nfunction addProductToCart(e) {\r\n  let k = false;\r\n  const card = e.target.closest(\".product-counter__info-card\");\r\n  if (e.target.classList.contains(\"button-addProduct\")) {\r\n    if (card.querySelector(\".product-counter__input\").value > 0) {\r\n      const name = card.querySelector(\"[data-product]\").dataset.product;\r\n      const id = e.target\r\n        .closest(\".product-counter__info-card\")\r\n        .querySelector(\".product-counter__portions\").dataset.id;\r\n      const quantity = card.querySelector(\".product-counter__input\").value;\r\n      const calories = card.querySelector(\r\n        '[data-summonfood=\"all-food\"]'\r\n      ).innerText;\r\n\r\n      const caloriesInBD = parseInt(\r\n        card.querySelector(\".product-counter__gramm\").querySelector(\"span\")\r\n          .innerText\r\n      );\r\n\r\n      const dataAboutProduct = {\r\n        id,\r\n        name,\r\n        quantity: parseInt(quantity),\r\n        calories: parseInt(calories),\r\n        src: name,\r\n        caloriesInBD,\r\n      };\r\n\r\n      console.log(dataAboutProduct);\r\n      // закрываем открытые окна\r\n      modal.classList.remove(\"slide-menu_active\");\r\n      menuSlider.classList.remove(\"product-counter_active\");\r\n\r\n      // если продукт уже есть, мы не должны опять  его отрисовывать и добавлять в БДБ надо в существующем просто изменить количество и калории\r\n      const HTMLCollectionOfProducts = ulList.children;\r\n      const arrOfProducts = Array.from(HTMLCollectionOfProducts); // делаем с HTMLCollection массив\r\n\r\n      // мы запускаем эту часть кода несколько раз для каждого ли в списке. В этом ошибка\\\r\n      // изменил foreach на some\r\n      arrOfProducts.some((el) => {\r\n        if (el.innerText.includes(name)) {\r\n          console.log(\"ebat\");\r\n\r\n          // находим в списке продуктов нужный нам, и меняем у него калории и грамы\r\n          const alreadyExistedProduct = ulList.querySelector(\r\n            `[data-productname=${name}]`\r\n          );\r\n          console.log(alreadyExistedProduct);\r\n          let caloriesOfAlreadyExistedProduct = +alreadyExistedProduct\r\n            .querySelector(\".added-product__calories\")\r\n            .innerText.replace(/\\D+\\.?\\D+/g, \"\"); // калории\r\n          // console.log(caloriesOfAlreadyExistedProduct);\r\n\r\n          let quantityOfAlreadyExistedProduct = +alreadyExistedProduct\r\n            .querySelector(\".added-product__quantity\")\r\n            .innerText.replace(/\\D+\\.?\\D+/g, \"\"); // граммы\r\n          // console.log(quantityOfAlreadyExistedProduct);\r\n\r\n          // добавляем калории и граммы уже к существующим продуктам\r\n          caloriesOfAlreadyExistedProduct =\r\n            parseInt(caloriesOfAlreadyExistedProduct) + parseInt(calories);\r\n          quantityOfAlreadyExistedProduct =\r\n            parseInt(quantityOfAlreadyExistedProduct) + parseInt(quantity);\r\n\r\n          // console.log(caloriesOfAlreadyExistedProduct);\r\n          alreadyExistedProduct.querySelector(\r\n            \".added-product__calories\"\r\n          ).innerText = caloriesOfAlreadyExistedProduct + \" калорий\";\r\n\r\n          alreadyExistedProduct.querySelector(\r\n            \".added-product__quantity\"\r\n          ).innerText = quantityOfAlreadyExistedProduct + \" грамм\";\r\n\r\n          // добавляем калории и граммы уже к существующим продуктам в БД\r\n\r\n          //надо заменить калории и количество на quantityOfAlreadyExistedProduct и caloriesOfAlreadyExistedProduct\r\n          const updatedProduct = {\r\n            id,\r\n            name,\r\n            quantity: parseInt(quantityOfAlreadyExistedProduct),\r\n            calories: parseInt(caloriesOfAlreadyExistedProduct),\r\n            src: name,\r\n            caloriesInBD,\r\n          };\r\n\r\n          fetch(`http://localhost:3000/my-products/${updatedProduct.id}`, {\r\n            method: \"PATCH\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify(updatedProduct),\r\n          })\r\n            .then((res) => res.json())\r\n            .then((json) => countCalories());\r\n\r\n          k = true;\r\n        }\r\n      });\r\n      if (k == false) {\r\n        console.log(\"cats\");\r\n        // // записываем новые продукты в массив в бд\r\n        fetch(\"http://localhost:3000/my-products\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(dataAboutProduct),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Accept: \"application/json\",\r\n          },\r\n        })\r\n          .then((response) => response.json())\r\n          .then((data) => {\r\n            // console.log(data);\r\n            countCalories();\r\n          });\r\n\r\n        // // разметка\r\n        const markUp = `<li class=\"added-product__item\" data-id =${dataAboutProduct.id} data-productName =${dataAboutProduct.name} data-caloriesInBD=${dataAboutProduct.caloriesInBD}>\r\n        <div class=\"added-product__content\"> \r\n        <div class=\"added-product__left\">\r\n      <div class=\"added-product__img\">\r\n        <img src=\"./img/img products/${dataAboutProduct.name}.png\" alt=\"\">\r\n      </div>\r\n      <div class=\"added-product__title\">${dataAboutProduct.name}</div>\r\n    </div>\r\n    <div class=\"added-product__right\">\r\n      <div class=\"added-product__calories\">${dataAboutProduct.calories} калорий </div>\r\n      <div class=\"added-product__quantity\">${dataAboutProduct.quantity} грамм</div>\r\n     \r\n    </div>\r\n        </div>\r\n        <div class=\"added-product__close\"></div>\r\n</li>`;\r\n\r\n        // рендерим на страницу\r\n        ulList.insertAdjacentHTML(\"beforeend\", markUp);\r\n\r\n        k = true;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction editProduct(e) {\r\n  if (e.target.classList.contains(\"added-product__content\")) {\r\n    console.log(e.target); // <div class=\"added-product__content\"></div>\r\n    const liProduct = e.target.closest(\".added-product__item\"); // <li class=\"added-product__item\"/>\r\n    editModalWindow.classList.add(\"edit-product_active\");\r\n\r\n    const data = {\r\n      id: liProduct.dataset.id,\r\n      name: liProduct.dataset.productname,\r\n      quantity: parseInt(\r\n        liProduct\r\n          .querySelector(\".added-product__quantity\")\r\n          .innerText.replace(/\\D+\\.?\\D+/g, \"\")\r\n      ),\r\n      calories: parseInt(\r\n        liProduct\r\n          .querySelector(\".added-product__calories\")\r\n          .innerText.replace(/\\D+\\.?\\D+/g, \"\")\r\n      ),\r\n      caloriesInBD: liProduct.dataset.caloriesinbd,\r\n    };\r\n\r\n    console.log(data);\r\n    const out = document.querySelector(\".edit-product__content\");\r\n    const markUp = `<div class=\"product-counter__card\" data-id =\"${data.id}\" >\r\n  <div class=\"product-counter__wrapper1\">\r\n    <div class=\"product-counter__img\">\r\n      <img\r\n        src=\"./img/img products/img big size products/${data.name}-xl-size.png\"\r\n        alt=\"\"\r\n      />\r\n    </div>\r\n    <h2 class=\"product-counter__title\">\r\n      <span> Имя продукта: </span> ${data.name}\r\n    </h2>\r\n  </div>\r\n  <div class=\"product-counter__wrapper2\">\r\n    <div class=\"product-counter__info-card\" data-name =\"${data.name}\">\r\n\r\n      <div class=\"product-counter__portion\">Порция</div>\r\n      <div class=\"product-counter__range\">\r\n        <input\r\n          type=\"range\"\r\n          class=\"product-counter__input2\"\r\n          min=\"0\"\r\n          max=\"300\"\r\n          value=\"${data.quantity}\"\r\n        />\r\n        <div class=\"product-counter__num\">\r\n          <span class=\"product-counter__quantity-gramm\">\r\n          ${data.quantity}</span\r\n          >\r\n          <span class=\"product-counter__span\"> грамм</span>\r\n        </div>\r\n      </div>\r\n      <ul class=\"product-counter__portions\" data-calories=\"${data.calories}\" data-product=\"${data.name}\" data-id =\"${data.id}\" data-caloriesInBD=\"${data.caloriesInBD}\">\r\n      <li class=\"product-counter__one-portion\">\r\n      <div class=\"product-counter__gramm\">\r\n        В 100 граммах ${data.name} ${data.caloriesInBD} каллорий\r\n      </div>\r\n    </li>\r\n    <li class=\"product-counter__one-portion\">\r\n      <div class=\"product-counter__gramm\">\r\n        Одна порция ${data.name} - это 150 грамм\r\n      </div>\r\n    </li>\r\n    <li class=\"product-counter__one-portion\">\r\n      <div class=\"product-counter__gramm\" >\r\n        Вы съели <span data-summonFood=\"all-food\"> ${data.calories} </span>  каллорий\r\n      </div>\r\n    </li>\r\n      </ul>\r\n      <button class=\"product-counter__btn button-edit\">\r\n       Редактировать\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>`;\r\n\r\n    out.insertAdjacentHTML(\"beforeend\", markUp);\r\n\r\n    out\r\n      .closest(\".edit-product\")\r\n      .querySelector(\".edit-product__close\")\r\n      .addEventListener(\"click\", () => {\r\n        editModalWindow.classList.remove(\"edit-product_active\");\r\n        out.innerHTML = \"\";\r\n      });\r\n  }\r\n}\r\n//\r\nfunction rangeAndCountCalories2(e) {\r\n  if (e.target.classList.contains(\"product-counter__input2\")) {\r\n    console.log(\"gavno\");\r\n    const input = e.target;\r\n    const card = input.closest(\".product-counter__info-card\");\r\n    console.log(card);\r\n    const outGram = card.querySelector(\".product-counter__quantity-gramm\");\r\n    outGram.innerHTML = e.target.value;\r\n    const outCalories = card.querySelector('[data-summonfood=\"all-food\"]');\r\n\r\n    const nameOfCurrentCard = card.querySelector(\"[data-product]\");\r\n    const caloriesOfProduct = nameOfCurrentCard.dataset.caloriesinbd;\r\n    const amountOfCalories =\r\n      (parseInt(e.target.value) * parseInt(caloriesOfProduct)) / 100;\r\n    outCalories.innerText = amountOfCalories;\r\n  }\r\n}\r\n\r\nfunction addEditedProduct(e) {\r\n  if (e.target.classList.contains(\"button-edit\")) {\r\n    console.log(\"sesichka suchka\");\r\n    const card = e.target.closest(\".product-counter__info-card\");\r\n    const name = card.dataset.name;\r\n    const id = card.querySelector(\".product-counter__portions\").dataset.id;\r\n    const quantity = card.querySelector(\r\n      \".product-counter__quantity-gramm\"\r\n    ).innerText;\r\n    const calories = card.querySelector(\r\n      '[data-summonfood=\"all-food\"]'\r\n    ).innerText;\r\n\r\n    const dataAboutProduct = {\r\n      id,\r\n      name,\r\n      quantity: parseInt(quantity),\r\n      calories: parseInt(calories),\r\n    };\r\n\r\n    console.log(dataAboutProduct);\r\n\r\n    // закрываем открытые окна\r\n    editModalWindow.classList.remove(\"edit-product_active\");\r\n    const out = document.querySelector(\".edit-product__content\");\r\n    out.innerHTML = \"\";\r\n\r\n    // перезаписываем значение калорий и вес\r\n    const productToChange = ulList.querySelector(\r\n      `[data-productname = ${dataAboutProduct.name}]`\r\n    );\r\n    console.log(productToChange); // li\r\n    productToChange.querySelector(\".added-product__quantity\").innerText =\r\n      dataAboutProduct.quantity + \" грамм\";\r\n    productToChange.querySelector(\".added-product__calories\").innerText =\r\n      dataAboutProduct.calories + \" калорий\";\r\n\r\n    // Записываем обновленные данные в БД\r\n\r\n    fetch(`http://localhost:3000/my-products/${dataAboutProduct.id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataAboutProduct),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => countCalories());\r\n  }\r\n}\r\n\r\nfunction deleteProduct(e) {\r\n  if (e.target.classList.contains(\"added-product__close\")) {\r\n    console.log(\"kotiki\");\r\n    const productWeWantToDelete = e.target.closest(\"li\");\r\n    console.log(productWeWantToDelete);\r\n    const id = productWeWantToDelete.dataset.id;\r\n    console.log(id);\r\n    // удаляем продукт с разметки\r\n    productWeWantToDelete.remove();\r\n\r\n    // удаляем с БД\r\n    fetch(`http://localhost:3000/my-products/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => countCalories());\r\n  }\r\n}\r\n\r\n//get data\r\nasync function getData() {\r\n  const response = await fetch(\"http://localhost:3000/products\");\r\n  const data = await response.json();\r\n  return data;\r\n}\r\n\r\n// считать сколько всего калорий\r\nfunction countCalories() {\r\n  const allCalories = document.querySelector(\".section-addProducts__num\");\r\n  fetch(\"http://localhost:3000/my-products\")\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      let sumOfCalories = 0;\r\n      data.forEach((product) => {\r\n        sumOfCalories += parseInt(product.calories);\r\n      });\r\n      allCalories.innerText = sumOfCalories;\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://gulp-2022/./src/js/modules/products.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/app.js");
/******/ 	
/******/ })()
;